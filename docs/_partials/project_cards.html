{% for entry in all_innovators_with_projects %}
    {% for project in entry.projects %}
        <div class="idea-section card">
            <!-- existing content for each project -->
        </div>
    {% endfor %}
{% endfor %}

{% for entry in all_innovators_with_projects %}
    {% for project in entry.projects %}
        <div class="project-card">
            <h3>{{ project.title }}</h3>
            <p>{{ project.description }}</p>
            <img src="{{ project.image.url }}" alt="{{ project.title }}">
            <p>Posted by: {{ entry.innovator.username }} ({{ entry.innovator.full_name }})</p>
        </div>
    {% endfor %}
{% endfor %}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const projectList = document.getElementById("project-list");
        const loading = document.getElementById("loading");
    
        function loadProjects() {
            loading.style.display = "block";
            fetch("{% url 'get_projects_data' %}")
                .then(response => response.json())
                .then(data => {
                    projectList.innerHTML = data.html;
                    loading.style.display = "none";
                })
                .catch(error => {
                    console.error("Error loading projects:", error);
                    loading.innerHTML = "<p>Failed to load projects.</p>";
                });
        }
    
        loadProjects();  // Initial load
    });
    </script>
    