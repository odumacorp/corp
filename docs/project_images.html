<h2>Images for Project: {{ project.title }}</h2>

<!-- Upload New Image -->
<h3>Upload New Image</h3>
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" name="upload_image">Upload Image</button>
</form>

<hr>

<!-- Existing Images -->
<h3>Uploaded Images</h3>
{% for image in images %}
    <div style="margin-bottom: 20px;">
        <img src="{{ image.image.url }}" alt="Image {{ image.id }}" style="max-width: 100px;"><br>
        <strong>Name:</strong> {{ image.name }}<br>
        <strong>Description:</strong> {{ image.description }}<br>

        {% if image.is_main %}
            <p style="color: green;"><strong>This is the main image</strong></p>
        {% else %}
            <form method="POST" style="display: inline;">
                {% csrf_token %}
                <button type="submit" name="main_image" value="{{ image.id }}">Set as Main</button>
            </form>
        {% endif %}

        <!-- Delete button -->
        <form method="POST" style="display: inline;">
            {% csrf_token %}
            <button type="submit" name="delete_image" value="{{ image.id }}" onclick="return confirm('Are you sure you want to delete this image?')">Delete</button>
        </form>
    </div>
{% endfor %}

<!-- Back to Dashboard -->
<a href="{% url 'dashboard' %}" class="btn btn-secondary">Back to Dashboard</a>
